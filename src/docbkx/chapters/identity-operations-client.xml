<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE section [
<!ENTITY % common SYSTEM "../../common/common.ent">
%common;
]>
<!-- if role="api-reference" on this chapter, generate table of all operations here -->
<chapter 
	xmlns="http://docbook.org/ns/docbook" 
	xmlns:xi="http://www.w3.org/2001/XInclude"
	xmlns:xlink="http://www.w3.org/1999/xlink"
	xmlns:wadl="http://wadl.dev.java.net/2009/02"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xml:id="API_Operations" version="5.0" role="api-reference">
	<title>API Operations for Client Developers</title>
	<para>
		Some of these operations require only the core authentication service API v2.0 and some require extensions to the API.
		If an extension is required, it is included in Rackspace's implementation of the Keystone Identity Service; 
		issuing the calls as described here uses the API extensions as needed.
	</para>
	
	<!--Versions-->
	
	<section xml:id="Version_operations">
		<title>API Contract Version</title>
		<para> The Rackspace Cloud can support multiple versions of the service API contract. This
			architecture allows service providers to develop, test, and deploy new API versions
			without disrupting service for customers that are using an existing version. You can use
			the Version operations to query the API service endpoint for information about the API
			version support in your cloud environment. </para>
		
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			
			<!-- Get all API versions -->
			
			<wadl:resource href="../../wadl/identity.wadl#versions">
				<wadl:method href="#listVersions"/>
		
			<!-- Get a specific API version -->
					<wadl:resource href="../../wadl/identity.wadl#version">
						<wadl:method href="#getVersionInfo"/>
					</wadl:resource>
			</wadl:resource>
		</wadl:resources>
	</section>
	
	<!--Extensions-->
	
	<section xml:id="Extensions_operations">
		<title>Extensions</title>
		<para xml:id="Extensions_ovw">
			The Rackspace Cloud Idenity Service deploys API extensions to add user and adminnistrative features to 
			the core OpenStack Keystone v2.0 API. You can use the Extensions API operations to query the API service 
			endpoint for information about the extensions available for the specified service.</para>
		
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			
			<!-- List extensions -->
			<wadl:resource href="../../wadl/identity.wadl#extensions">
				<wadl:method href="listExtensions"/>
			</wadl:resource>
			
			<!-- Get extensions -->	
			
			<wadl:resource href="../../wadl/identity.wadl#extension">
				<wadl:method href="getExtension"/>
			</wadl:resource>
		</wadl:resources>
	</section>
	
	<!--User operations-->
	
	<section xml:id="User_Calls">
		<title>Users</title>
		<para>The operations described in this section allow clients to manage users.</para>
		<note>
			<para> 
				Some of the functionality described in this section is
				provided by the <code>OS-KSADM</code> and <code>RAX-KSKEY</code> extensions to the
				core Identity API. 
				You can learn more about API extensions at
				<link xlink:href="https://github.com/openstack/identity-api/tree/master/openstack-identity-api/src/docbkx/">
					https://github.com/openstack/identity-api/tree/master/openstack-identity-api/src/docbkx/</link>.  
			</para>
		</note>
		<para> When these requests are issued by an account user, they act
			only upon that account user. You can learn more about
			account users, also called sub-accounts, at <olink
				targetdoc="Identity-Developer-Guide"
				targetptr="Account-Users-d1e910">“Account
				Users”</olink>. </para>
		<!--- this section comes from 3 WADLs: core identity-admin + extensions OS-KSADM-admin & RAX-KSKEY-admin -->
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<!-- list users -->
			<wadl:resource href="../../wadl/OS-KSADM-admin.wadl#users">
				<wadl:method href="listUsers">
					<wadl:doc>
						<note>
							<para>
								<emphasis role="italic">
									If you  authenticated with the user role, you can see only yourself.
								</emphasis>
							</para>
							<para>
								If this request is issued by  a user holding the admin role (<code>identity:user-admin</code>),
								it returns a list of all users for the tenant.
							</para>
							<para> 
								If this request is issued by a user holding the user role (<code>identity:default</code>), it
								returns only the user who issued the request. 
							</para>
						</note>
					</wadl:doc>
				</wadl:method>
			</wadl:resource>
			<!-- list user -->
			<wadl:resource href="../../wadl/identity-admin.wadl#name">
				<wadl:method href="getUserByName"/>
			</wadl:resource>
			<wadl:resource href="../../wadl/identity-admin.wadl#userid">
				<wadl:method href="getUserById"/>
			</wadl:resource>
			<wadl:resource href="../../wadl/identity-admin.wadl#users">
				<wadl:method href="#getUserByEmail"/>
			</wadl:resource>
			<!-- add user -->
			<wadl:resource href="../../wadl/OS-KSADM-admin.wadl#users">
				<wadl:method href="addUser">
				<wadl:doc>
					<note>
						<para> This call is available only to users who hold the admin role (<code>identity:user-admin</code>).
								Using the admin role, you can create a user who holds the user role (<code>identity:default</code>). </para>
					</note>
					<warning>
						<para> If you use this <code>POST /users</code> call to create a user, that user will have access to
								APIs but will not have access to the Cloud Control Panel. Cloud Control Panel access is provided to 
								the account's admin user; the admin user is the user who initiated the account by completing the 
								Sign-Up process. </para>
					</warning>
				</wadl:doc>
				</wadl:method>
			</wadl:resource>
			<!-- update user -->
			<wadl:resource href="../../wadl/OS-KSADM-admin.wadl#userById">
				<wadl:method href="updateUser">
					<wadl:doc>
						<note>
							<para> Users who hold the admin role can update users who hold the user role (<code>identity:default</code>) or
								the admin role (<code>identity:user-admin</code>) for the same tenant. </para>
						</note>
					</wadl:doc>
				</wadl:method>
			</wadl:resource>
			<!-- delete user -->
			<wadl:resource href="../../wadl/OS-KSADM-admin.wadl#userById">
				<wadl:method href="deleteUser">
					<wadl:doc>
						<note>
							<para> This call is available only to users who hold the admin role (<code>identity:user-admin</code>).
								Using the admin role, you can delete a user who holds the user role (<code>identity:default</code>) 
								for the same tenant. </para>
						</note>
					</wadl:doc>
				</wadl:method>
			</wadl:resource>
			<!-- list all credentials -->
			<wadl:resource href="../../wadl/OS-KSADM-admin.wadl#userCredentials">
				<wadl:method href="listCredentials">
					<wadl:doc>
						<note>
							<para>
								<emphasis role="italic">You can see only yourself.</emphasis>
							</para>
							<para> This call is available to users who hold either the admin role
								(<code>identity:user-admin</code>) or the user role (<code>identity:default</code>). In
								either case, the credentials returned are only those of the user who issued the request. </para>
						</note>
					</wadl:doc>
				</wadl:method>
			</wadl:resource>
			<!-- get user's API key credentials -->
			<wadl:resource href="../../wadl/RAX-KSKEY-admin.wadl#userCredentialsByType">
				<wadl:method href="getUserCredential">
				<wadl:doc>
					<note>
						<para>
							<emphasis role="italic">You
								can see only yourself.</emphasis>
						</para>
						<para> This call is available to users who hold either the admin
								role
								(<code>identity:user-admin</code>) or
								the user role
								(<code>identity:default</code>). In
								either case, the credentials returned
								are only those of the user who issued
								the request. </para>
					</note>
				</wadl:doc>
				</wadl:method>
			</wadl:resource>
			<!-- reset user's API key credentials -->
			<wadl:resource href="../../wadl/RAX-AUTH.wadl#reset_apikey_credentials" >
				<wadl:method href="resetUserAPIKeyCredentials"/>
			</wadl:resource>
		</wadl:resources>
	</section>
	<section xml:id="Role_Calls">
		<title>Roles</title>
		<para>The operations described in this section allow clients to manage roles.</para>
			<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
				<!-- list roles -->
				<wadl:resource href="../../wadl/OS-KSADM-admin.wadl#roles">
					<wadl:method href="listRoles"/>
				</wadl:resource>
				<!-- get a global role -->
				<wadl:resource href="../../wadl/OS-KSADM-admin.wadl#roleId">
					<wadl:method href="getRole"/>
				</wadl:resource>
				<!-- add a global role to a user -->
				<wadl:resource href="../../wadl/OS-KSADM-admin.wadl#userRoleById">
					<wadl:method href="addUserRole"/>
				</wadl:resource>
				<!-- delete a global role from a user -->
				<wadl:resource href="../../wadl/OS-KSADM-admin.wadl#userRoleById">
					<wadl:method href="deleteUserRole"/>
				</wadl:resource>
				<!-- list global roles available to a user -->
				<wadl:resource href="../../wadl/identity-admin.wadl#userRoles">
					<wadl:method href="listUserGlobalRoles">
						<wadl:doc>
							<note>
									<para> This call is available to users who hold either the
								admin role
								(<code>identity:user-admin</code>)
								or the user role
								(<code>identity:default</code>). </para>
									<para> For users holding the <code>user</code> role, the call
								is valid only if <code>userID</code>
								and the <code>user-default</code>
								token have the same value for
								<code>tenant</code>. </para>
							</note>
						</wadl:doc>
					</wadl:method>
				</wadl:resource>
			</wadl:resources>
	</section>
	<section xml:id="Token_Calls">
		<title>Tokens</title>
		<para>The operations described in this section allow clients to get and validate access tokens.</para>
		
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="../../wadl/identity.wadl#tokens" >
				<!-- authenticate token -->
				<wadl:method href="authenticate"/>				
			</wadl:resource>
			<wadl:resource href="../../wadl/identity.wadl#token">
				<!-- revoke token -->
				<wadl:method href="revokeToken"/>
			</wadl:resource>
		</wadl:resources>
	</section>
	<section xml:id="Tenant_Calls">
		<title>Tenants</title>
		<para>The operations described in this section allow clients to manage tenants.</para>
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="../../wadl/identity.wadl#tenants">
				<wadl:method href="listTenants">
				</wadl:method>
			</wadl:resource>
		</wadl:resources>
	</section>
  </chapter>

